<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dev/g0d</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
  <script>
    // ตรวจสอบ token
    if (localStorage.getItem('authToken') !== 'g0d24tokenaccess') {
      // ถ้าไม่มี token หรือ token ไม่ถูกต้อง ไม่ทำอะไรเลย (หน้าจะว่าง)
      document.body.innerHTML = '';
      return;
    }

    // ถ้ามี token ถูกต้อง สร้าง DOM และรันโค้ดปกติ
    document.body.innerHTML = `
      <div id="mainContent" class="min-h-screen flex flex-col items-center p-6">
        <h1 class="text-4xl font-bold text-blue-400 mb-4">Dev/g0d</h1>
        <input type="text" id="searchBar" class="search-bar mb-4" placeholder="ค้นหา...">
        <div class="flex space-x-4 mb-6">
          <button id="allGamesTab" class="tab px-4 py-2 rounded text-white font-bold active-tab">เกมที่แก้ไข</button>
          <button id="unfixableTab" class="tab px-4 py-2 rounded text-white font-bold">เกมที่แก้ไขไม่ได้</button>
        </div>
        <div id="gameGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full max-w-6xl"></div>
        <div id="unfixableList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full max-w-6xl hidden"></div>
        <div id="videoPopup" class="popup">
          <button id="closePopupBtn" class="close-btn">×</button>
          <video id="popupPlayer" class="popup-video" controls autoplay>
            <source id="popupSource" type="video/webm">
          </video>
        </div>
      </div>
    `;

    // สไตล์ CSS
    const style = document.createElement('style');
    style.textContent = `
      body {
        background-color: #1a1a1a;
        color: #e0e0e0;
        font-family: 'Arial', sans-serif;
      }
      .thumbnail {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .thumbnail:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(147, 51, 234, 0.7);
      }
      .download-btn {
        background: linear-gradient(45deg, #3b82f6, #ec4899);
        transition: background 0.3s ease;
      }
      .download-btn:hover:enabled {
        background: linear-gradient(45deg, #ec4899, #3b82f6);
      }
      .fix-btn {
        background: linear-gradient(45deg, #3b82f6, #ec4899);
        transition: background 0.3s ease;
      }
      .fix-btn:hover:enabled {
        background: linear-gradient(45deg, #ec4899, #3b82f6);
      }
      .disabled-btn {
        background: #4b5563;
        cursor: not-allowed;
      }
      .tab {
        transition: all 0.3s ease;
      }
      .tab:hover {
        background-color: #3b82f6;
      }
      .active-tab {
        background: linear-gradient(45deg, #3b82f6, #ec4899);
      }
      .media-container {
        position: relative;
        width: 100%;
        height: 192px;
        overflow: hidden;
        background-color: #000;
        cursor: pointer;
      }
      .media-container img,
      .media-container video {
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: contain;
        top: 0;
        left: 0;
      }
      .media-container video {
        display: none;
        z-index: 1;
      }
      .media-container:hover video {
        display: block;
      }
      .media-container:hover img {
        display: none;
      }
      .popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        display: none;
      }
      .popup-video {
        width: 80%;
        max-width: 800px;
        height: auto;
        max-height: 80vh;
        object-fit: contain;
      }
      .close-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        color: #e0e0e0;
        font-size: 2rem;
        cursor: pointer;
        background: none;
        border: none;
      }
      .search-bar {
        background-color: #2d2d2d;
        border: 1px solid #3b82f6;
        color: #e0e0e0;
        padding: 8px 12px;
        border-radius: 8px;
        width: 100%;
        max-width: 400px;
      }
      .search-bar:focus {
        outline: none;
        border-color: #ec4899;
        box-shadow: 0 0 5px rgba(236, 72, 153, 0.5);
      }
    `;
    document.head.appendChild(style);

    // ข้อมูลเกม
    const games = [
      {
        "title": "R.E.P.O.",
        "thumbnail": "https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/3241660/1ea445e044a2d5b09cfa8291350b63ebed6e5741/header.jpg?t=1747381002",
        "video": "https://video.fastly.steamstatic.com/store_trailers/257093766/movie480_vp9.webm?t=1743517223",
        "downloadLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "fixLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "version": "1.2.32 Beta",
        "crackedBy": "g0d",
        "platform": "Steam",
        "downloadEnabled": true,
        "fixEnabled": true,
        "officialLink": "https://store.steampowered.com/app/3241660/REPO/",
        "password": "repo123",
        "fixPassword": "fixrepo456"
      },
      {
        "title": "Cyber Heist",
        "thumbnail": "https://via.placeholder.com/300x400.png?text=Cyber+Heist",
        "downloadLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "fixLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "version": "v2.0.1",
        "crackedBy": "NightHax",
        "platform": "PC",
        "downloadEnabled": true,
        "fixEnabled": false,
        "officialLink": "#",
        "password": "cyber789",
        "fixPassword": "fixcyber000"
      },
      {
        "title": "DoomForge",
        "thumbnail": "https://via.placeholder.com/300x400.png?text=DoomForge",
        "downloadLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "fixLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "version": "v1.5.0",
        "crackedBy": "ShadowLads",
        "platform": "PC",
        "downloadEnabled": false,
        "fixEnabled": false,
        "officialLink": "#",
        "password": "doom321",
        "fixPassword": "fixdoom654"
      },
      {
        "title": "Rogue Galaxy",
        "thumbnail": "https://via.placeholder.com/300x400.png?text=Rogue+Galaxy",
        "downloadLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "fixLink": "https://akirabox.com/E1x3Adq8nmyk/file",
        "version": "v3.1.2",
        "crackedBy": "CrackZoid",
        "platform": "PC",
        "downloadEnabled": true,
        "fixEnabled": true,
        "officialLink": "#",
        "password": "rogue987",
        "fixPassword": "fixrogue111"
      }
    ];

    const unfixableGames = [
      {
        "title": "West Hunt",
        "thumbnail": "https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/1570330/header.jpg?t=1735042818",
        "video": "https://video.fastly.steamstatic.com/store_trailers/256936422/movie480_vp9.webm?t=1679086628",
        "issue": "ถูกป้องกันจากเซิฟเวอร์",
        "officialLink": "#"
      }
    ];

    // DOM elements
    const gameGrid = document.getElementById('gameGrid');
    const unfixableList = document.getElementById('unfixableList');
    const allGamesTab = document.getElementById('allGamesTab');
    const unfixableTab = document.getElementById('unfixableTab');
    const videoPopup = document.getElementById('videoPopup');
    const popupPlayer = document.getElementById('popupPlayer');
    const popupSource = document.getElementById('popupSource');
    const searchBar = document.getElementById('searchBar');
    const closePopupBtn = document.getElementById('closePopupBtn');

    function renderAllGames() {
      gameGrid.innerHTML = '';
      unfixableList.classList.add('hidden');
      gameGrid.classList.remove('hidden');
      games.forEach(game => {
        const card = document.createElement('div');
        card.className = 'thumbnail bg-gray-800 rounded-lg overflow-hidden shadow-lg';

        card.innerHTML = `
          <div class="media-container" data-video="${game.video || ''}">
            <img src="${game.thumbnail}" alt="${game.title}">
            ${game.video ? `
              <video autoplay muted loop playsinline preload>
                <source src="${game.video}" type="video/webm">
              </video>` : ''}
          </div>
          <div class="p-4">
            <a href="${game.officialLink}" target="_blank" class="text-xl font-semibold text-blue-400 hover:underline">${game.title}</a>
            <p class="text-gray-400 text-sm">เวอร์ชั่น: ${game.version}</p>
            <p class="text-gray-400 text-sm">แก้ไขโดย: ${game.crackedBy}</p>
            <p class="text-gray-400 text-sm">แพลตฟอร์ม: ${game.platform}</p>
            <p class="text-gray-400 text-sm">รหัสผ่าน: ${game.password}</p>
            <p class="text-gray-400 text-sm">รหัสผ่านแก้ไข: ${game.fixPassword}</p>
            <div class="flex space-x-2 mt-4">
              <a href="${game.downloadLink}" target="_blank" class="download-btn flex-1 text-center py-2 px-4 rounded text-white font-bold ${!game.downloadEnabled ? 'disabled-btn' : ''}" ${game.downloadEnabled ? '' : 'disabled'}>ดาวน์โหลด</a>
              <a href="${game.fixLink}" target="_blank" class="fix-btn flex-1 text-center py-2 px-4 rounded text-white font-bold ${!game.fixEnabled ? 'disabled-btn' : ''}" ${game.fixEnabled ? '' : 'disabled'}>แก้ไข</a>
            </div>
          </div>
        `;
        gameGrid.appendChild(card);

        const mediaContainer = card.querySelector('.media-container');
        const video = mediaContainer.querySelector('video');
        if (video) {
          mediaContainer.addEventListener('click', () => {
            if (game.video) {
              popupSource.src = game.video;
              popupPlayer.load();
              videoPopup.style.display = 'flex';
              popupPlayer.play();
            }
          });
        }
      });
    }

    function renderUnfixableGames() {
      unfixableList.innerHTML = '';
      gameGrid.classList.add('hidden');
      unfixableList.classList.remove('hidden');
      unfixableGames.forEach(game => {
        const card = document.createElement('div');
        card.className = 'thumbnail bg-gray-800 rounded-lg overflow-hidden shadow-lg';
        card.innerHTML = `
          <div class="media-container" data-video="${game.video || ''}">
            <img src="${game.thumbnail}" alt="${game.title}">
            ${game.video ? `
              <video autoplay muted loop playsinline preload>
                <source src="${game.video}" type="video/webm">
              </video>` : ''}
          </div>
          <div class="p-4">
            <a href="${game.officialLink}" target="_blank" class="text-xl font-semibold text-blue-400 hover:underline">${game.title}</a>
            <p class="text-red-400 text-sm">ปัญหาหลัก: ${game.issue}</p>
          </div>
        `;
        unfixableList.appendChild(card);

        const mediaContainer = card.querySelector('.media-container');
        const video = mediaContainer.querySelector('video');
        if (video) {
          mediaContainer.addEventListener('click', () => {
            if (game.video) {
              popupSource.src = game.video;
              popupPlayer.load();
              videoPopup.style.display = 'flex';
              popupPlayer.play();
            }
          });
        }
      });
    }

    function renderSearchResults(searchTerm) {
      gameGrid.innerHTML = '';
      unfixableList.innerHTML = '';
      gameGrid.classList.remove('hidden');
      unfixableList.classList.add('hidden');
      
      const allGames = [...games, ...unfixableGames];
      const filteredGames = allGames.filter(game => game.title.toLowerCase().includes(searchTerm.toLowerCase()));

      filteredGames.forEach(game => {
        const card = document.createElement('div');
        card.className = 'thumbnail bg-gray-800 rounded-lg overflow-hidden shadow-lg';

        if (game.downloadEnabled !== undefined) {
          card.innerHTML = `
            <div class="media-container" data-video="${game.video || ''}">
              <img src="${game.thumbnail}" alt="${game.title}">
              ${game.video ? `
                <video autoplay muted loop playsinline preload>
                  <source src="${game.video}" type="video/webm">
                </video>` : ''}
            </div>
            <div class="p-4">
              <a href="${game.officialLink}" target="_blank" class="text-xl font-semibold text-blue-400 hover:underline">${game.title}</a>
              <p class="text-gray-400 text-sm">เวอร์ชั่น: ${game.version}</p>
              <p class="text-gray-400 text-sm">แก้ไขโดย: ${game.crackedBy}</p>
              <p class="text-gray-400 text-sm">แพลตฟอร์ม: ${game.platform}</p>
              <p class="text-gray-400 text-sm">รหัสผ่าน: ${game.password}</p>
              <p class="text-gray-400 text-sm">รหัสผ่านแก้ไข: ${game.fixPassword}</p>
              <div class="flex space-x-2 mt-4">
                <a href="${game.downloadLink}" target="_blank" class="download-btn flex-1 text-center py-2 px-4 rounded text-white font-bold ${!game.downloadEnabled ? 'disabled-btn' : ''}" ${game.downloadEnabled ? '' : 'disabled'}>ดาวน์โหลด</a>
                <a href="${game.fixLink}" target="_blank" class="fix-btn flex-1 text-center py-2 px-4 rounded text-white font-bold ${!game.fixEnabled ? 'disabled-btn' : ''}" ${game.fixEnabled ? '' : 'disabled'}>แก้ไข</a>
              </div>
            </div>
          `;
        } else {
          card.innerHTML = `
            <div class="media-container" data-video="${game.video || ''}">
              <img src="${game.thumbnail}" alt="${game.title}">
              ${game.video ? `
                <video autoplay muted loop playsinline preload>
                  <source src="${game.video}" type="video/webm">
                </video>` : ''}
            </div>
            <div class="p-4">
              <a href="${game.officialLink}" target="_blank" class="text-xl font-semibold text-blue-400 hover:underline">${game.title}</a>
              <p class="text-red-400 text-sm">ปัญหาหลัก: ${game.issue}</p>
            </div>
          `;
        }
        gameGrid.appendChild(card);

        const mediaContainer = card.querySelector('.media-container');
        const video = mediaContainer.querySelector('video');
        if (video) {
          mediaContainer.addEventListener('click', () => {
            if (game.video) {
              popupSource.src = game.video;
              popupPlayer.load();
              videoPopup.style.display = 'flex';
              popupPlayer.play();
            }
          });
        }
      });
    }

    function closePopup() {
      videoPopup.style.display = 'none';
      popupPlayer.pause();
      popupSource.src = '';
    }

    allGamesTab.addEventListener('click', () => {
      allGamesTab.classList.add('active-tab');
      unfixableTab.classList.remove('active-tab');
      searchBar.value = '';
      renderAllGames();
    });

    unfixableTab.addEventListener('click', () => {
      unfixableTab.classList.add('active-tab');
      allGamesTab.classList.remove('active-tab');
      searchBar.value = '';
      renderUnfixableGames();
    });

    searchBar.addEventListener('input', () => {
      const searchTerm = searchBar.value.trim();
      if (searchTerm === '') {
        if (allGamesTab.classList.contains('active-tab')) {
          renderAllGames();
        } else {
          renderUnfixableGames();
        }
      } else {
        renderSearchResults(searchTerm);
      }
    });

    closePopupBtn.addEventListener('click', closePopup);

    renderAllGames();
  </script>
</body>
</html>
